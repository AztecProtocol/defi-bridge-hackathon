"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.JoinSplitTxDao = void 0;
const tslib_1 = require("tslib");
const address_1 = require("@aztec/barretenberg/address");
const tx_hash_1 = require("@aztec/barretenberg/tx_hash");
const typeorm_1 = require("typeorm");
const user_1 = require("../../user");
const transformer_1 = require("./transformer");
let JoinSplitTxDao = class JoinSplitTxDao {
    afterLoad() {
        if (this.settled === null) {
            delete this.settled;
        }
    }
};
tslib_1.__decorate([
    typeorm_1.PrimaryColumn('blob', { transformer: [transformer_1.txHashTransformer] }),
    tslib_1.__metadata("design:type", tx_hash_1.TxHash)
], JoinSplitTxDao.prototype, "txHash", void 0);
tslib_1.__decorate([
    typeorm_1.PrimaryColumn('blob', { transformer: [transformer_1.accountIdTransformer] }),
    tslib_1.__metadata("design:type", user_1.AccountId)
], JoinSplitTxDao.prototype, "userId", void 0);
tslib_1.__decorate([
    typeorm_1.Column(),
    tslib_1.__metadata("design:type", Number)
], JoinSplitTxDao.prototype, "assetId", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], JoinSplitTxDao.prototype, "publicInput", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], JoinSplitTxDao.prototype, "publicOutput", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], JoinSplitTxDao.prototype, "privateInput", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], JoinSplitTxDao.prototype, "recipientPrivateOutput", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], JoinSplitTxDao.prototype, "senderPrivateOutput", void 0);
tslib_1.__decorate([
    typeorm_1.Column('blob', { transformer: [transformer_1.ethAddressTransformer], nullable: true }),
    tslib_1.__metadata("design:type", address_1.EthAddress)
], JoinSplitTxDao.prototype, "inputOwner", void 0);
tslib_1.__decorate([
    typeorm_1.Column('blob', { transformer: [transformer_1.ethAddressTransformer], nullable: true }),
    tslib_1.__metadata("design:type", address_1.EthAddress)
], JoinSplitTxDao.prototype, "outputOwner", void 0);
tslib_1.__decorate([
    typeorm_1.Column(),
    tslib_1.__metadata("design:type", Boolean)
], JoinSplitTxDao.prototype, "ownedByUser", void 0);
tslib_1.__decorate([
    typeorm_1.Column(),
    tslib_1.__metadata("design:type", Date)
], JoinSplitTxDao.prototype, "created", void 0);
tslib_1.__decorate([
    typeorm_1.Column({ nullable: true }),
    tslib_1.__metadata("design:type", Date)
], JoinSplitTxDao.prototype, "settled", void 0);
tslib_1.__decorate([
    typeorm_1.AfterLoad(),
    typeorm_1.AfterInsert(),
    typeorm_1.AfterUpdate(),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", []),
    tslib_1.__metadata("design:returntype", void 0)
], JoinSplitTxDao.prototype, "afterLoad", null);
JoinSplitTxDao = tslib_1.__decorate([
    typeorm_1.Entity({ name: 'joinSplitTx' }),
    typeorm_1.Index(['txHash', 'userId'], { unique: true })
], JoinSplitTxDao);
exports.JoinSplitTxDao = JoinSplitTxDao;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam9pbl9zcGxpdF90eF9kYW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZGF0YWJhc2Uvc3FsX2RhdGFiYXNlL2pvaW5fc3BsaXRfdHhfZGFvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSx5REFBeUQ7QUFDekQseURBQXFEO0FBQ3JELHFDQUFvRztBQUNwRyxxQ0FBdUM7QUFDdkMsK0NBQWtIO0FBSWxILElBQWEsY0FBYyxHQUEzQixNQUFhLGNBQWM7SUEyQ3pCLFNBQVM7UUFDUCxJQUFJLElBQUksQ0FBQyxPQUFPLEtBQUssSUFBSSxFQUFFO1lBQ3pCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztTQUNyQjtJQUNILENBQUM7Q0FDRixDQUFBO0FBOUNDO0lBREMsdUJBQWEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQywrQkFBaUIsQ0FBQyxFQUFFLENBQUM7c0NBQzVDLGdCQUFNOzhDQUFDO0FBR3ZCO0lBREMsdUJBQWEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQyxrQ0FBb0IsQ0FBQyxFQUFFLENBQUM7c0NBQy9DLGdCQUFTOzhDQUFDO0FBRzFCO0lBREMsZ0JBQU0sRUFBRTs7K0NBQ2U7QUFHeEI7SUFEQyxnQkFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLCtCQUFpQixDQUFDLEVBQUUsQ0FBQzs7bURBQ3pCO0FBRzVCO0lBREMsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQywrQkFBaUIsQ0FBQyxFQUFFLENBQUM7O29EQUN4QjtBQUc3QjtJQURDLGdCQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsV0FBVyxFQUFFLENBQUMsK0JBQWlCLENBQUMsRUFBRSxDQUFDOztvREFDeEI7QUFHN0I7SUFEQyxnQkFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLCtCQUFpQixDQUFDLEVBQUUsQ0FBQzs7OERBQ2Q7QUFHdkM7SUFEQyxnQkFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLCtCQUFpQixDQUFDLEVBQUUsQ0FBQzs7MkRBQ2pCO0FBR3BDO0lBREMsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQyxtQ0FBcUIsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztzQ0FDckQsb0JBQVU7a0RBQUM7QUFHL0I7SUFEQyxnQkFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLG1DQUFxQixDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO3NDQUNwRCxvQkFBVTttREFBQztBQUdoQztJQURDLGdCQUFNLEVBQUU7O21EQUNvQjtBQUc3QjtJQURDLGdCQUFNLEVBQUU7c0NBQ1EsSUFBSTsrQ0FBQztBQUd0QjtJQURDLGdCQUFNLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7c0NBQ1YsSUFBSTsrQ0FBQztBQUt0QjtJQUhDLG1CQUFTLEVBQUU7SUFDWCxxQkFBVyxFQUFFO0lBQ2IscUJBQVcsRUFBRTs7OzsrQ0FLYjtBQS9DVSxjQUFjO0lBRjFCLGdCQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLENBQUM7SUFDL0IsZUFBSyxDQUFDLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDO0dBQ2pDLGNBQWMsQ0FnRDFCO0FBaERZLHdDQUFjIn0=