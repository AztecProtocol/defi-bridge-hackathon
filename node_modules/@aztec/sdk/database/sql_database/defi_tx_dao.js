"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DefiTxDao = void 0;
const tslib_1 = require("tslib");
const bridge_id_1 = require("@aztec/barretenberg/bridge_id");
const tx_hash_1 = require("@aztec/barretenberg/tx_hash");
const typeorm_1 = require("typeorm");
const user_1 = require("../../user");
const transformer_1 = require("./transformer");
let DefiTxDao = class DefiTxDao {
    afterLoad() {
        if (this.settled === null) {
            delete this.settled;
        }
    }
};
tslib_1.__decorate([
    typeorm_1.PrimaryColumn('blob', { transformer: [transformer_1.txHashTransformer] }),
    tslib_1.__metadata("design:type", tx_hash_1.TxHash)
], DefiTxDao.prototype, "txHash", void 0);
tslib_1.__decorate([
    typeorm_1.Index({ unique: false }),
    typeorm_1.Column('blob', { transformer: [transformer_1.accountIdTransformer] }),
    tslib_1.__metadata("design:type", user_1.AccountId)
], DefiTxDao.prototype, "userId", void 0);
tslib_1.__decorate([
    typeorm_1.Column('blob', { transformer: [transformer_1.bridgeIdTransformer] }),
    tslib_1.__metadata("design:type", bridge_id_1.BridgeId)
], DefiTxDao.prototype, "bridgeId", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], DefiTxDao.prototype, "depositValue", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], DefiTxDao.prototype, "txFee", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], DefiTxDao.prototype, "outputValueA", void 0);
tslib_1.__decorate([
    typeorm_1.Column('text', { transformer: [transformer_1.bigintTransformer] }),
    tslib_1.__metadata("design:type", typeof BigInt === "function" ? BigInt : Object)
], DefiTxDao.prototype, "outputValueB", void 0);
tslib_1.__decorate([
    typeorm_1.Column(),
    tslib_1.__metadata("design:type", Date)
], DefiTxDao.prototype, "created", void 0);
tslib_1.__decorate([
    typeorm_1.Column({ nullable: true }),
    tslib_1.__metadata("design:type", Date)
], DefiTxDao.prototype, "settled", void 0);
tslib_1.__decorate([
    typeorm_1.AfterLoad(),
    typeorm_1.AfterInsert(),
    typeorm_1.AfterUpdate(),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", []),
    tslib_1.__metadata("design:returntype", void 0)
], DefiTxDao.prototype, "afterLoad", null);
DefiTxDao = tslib_1.__decorate([
    typeorm_1.Entity({ name: 'defiTx' })
], DefiTxDao);
exports.DefiTxDao = DefiTxDao;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaV90eF9kYW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZGF0YWJhc2Uvc3FsX2RhdGFiYXNlL2RlZmlfdHhfZGFvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSw2REFBeUQ7QUFDekQseURBQXFEO0FBQ3JELHFDQUFvRztBQUNwRyxxQ0FBdUM7QUFDdkMsK0NBQWdIO0FBR2hILElBQWEsU0FBUyxHQUF0QixNQUFhLFNBQVM7SUFnQ3BCLFNBQVM7UUFDUCxJQUFJLElBQUksQ0FBQyxPQUFPLEtBQUssSUFBSSxFQUFFO1lBQ3pCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztTQUNyQjtJQUNILENBQUM7Q0FDRixDQUFBO0FBbkNDO0lBREMsdUJBQWEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQywrQkFBaUIsQ0FBQyxFQUFFLENBQUM7c0NBQzVDLGdCQUFNO3lDQUFDO0FBSXZCO0lBRkMsZUFBSyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3hCLGdCQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsV0FBVyxFQUFFLENBQUMsa0NBQW9CLENBQUMsRUFBRSxDQUFDO3NDQUN4QyxnQkFBUzt5Q0FBQztBQUcxQjtJQURDLGdCQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsV0FBVyxFQUFFLENBQUMsaUNBQW1CLENBQUMsRUFBRSxDQUFDO3NDQUNyQyxvQkFBUTsyQ0FBQztBQUczQjtJQURDLGdCQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsV0FBVyxFQUFFLENBQUMsK0JBQWlCLENBQUMsRUFBRSxDQUFDOzsrQ0FDeEI7QUFHN0I7SUFEQyxnQkFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLCtCQUFpQixDQUFDLEVBQUUsQ0FBQzs7d0NBQy9CO0FBR3RCO0lBREMsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQywrQkFBaUIsQ0FBQyxFQUFFLENBQUM7OytDQUN4QjtBQUc3QjtJQURDLGdCQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsV0FBVyxFQUFFLENBQUMsK0JBQWlCLENBQUMsRUFBRSxDQUFDOzsrQ0FDeEI7QUFHN0I7SUFEQyxnQkFBTSxFQUFFO3NDQUNRLElBQUk7MENBQUM7QUFHdEI7SUFEQyxnQkFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO3NDQUNWLElBQUk7MENBQUM7QUFLdEI7SUFIQyxtQkFBUyxFQUFFO0lBQ1gscUJBQVcsRUFBRTtJQUNiLHFCQUFXLEVBQUU7Ozs7MENBS2I7QUFwQ1UsU0FBUztJQURyQixnQkFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDO0dBQ2QsU0FBUyxDQXFDckI7QUFyQ1ksOEJBQVMifQ==