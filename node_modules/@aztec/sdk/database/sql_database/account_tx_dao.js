"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AccountTxDao = void 0;
const tslib_1 = require("tslib");
const tx_hash_1 = require("@aztec/barretenberg/tx_hash");
const typeorm_1 = require("typeorm");
const user_1 = require("../../user");
const transformer_1 = require("./transformer");
let AccountTxDao = class AccountTxDao {
    afterLoad() {
        if (this.settled === null) {
            delete this.settled;
        }
    }
};
tslib_1.__decorate([
    typeorm_1.PrimaryColumn('blob', { transformer: [transformer_1.txHashTransformer] }),
    tslib_1.__metadata("design:type", tx_hash_1.TxHash)
], AccountTxDao.prototype, "txHash", void 0);
tslib_1.__decorate([
    typeorm_1.Index({ unique: false }),
    typeorm_1.Column('blob', { transformer: [transformer_1.accountIdTransformer] }),
    tslib_1.__metadata("design:type", user_1.AccountId)
], AccountTxDao.prototype, "userId", void 0);
tslib_1.__decorate([
    typeorm_1.Column('blob', { nullable: true, transformer: [transformer_1.aliasHashTransformer] }),
    tslib_1.__metadata("design:type", user_1.AliasHash)
], AccountTxDao.prototype, "aliasHash", void 0);
tslib_1.__decorate([
    typeorm_1.Column({ nullable: true }),
    tslib_1.__metadata("design:type", Buffer)
], AccountTxDao.prototype, "newSigningPubKey1", void 0);
tslib_1.__decorate([
    typeorm_1.Column({ nullable: true }),
    tslib_1.__metadata("design:type", Buffer)
], AccountTxDao.prototype, "newSigningPubKey2", void 0);
tslib_1.__decorate([
    typeorm_1.Column(),
    tslib_1.__metadata("design:type", Boolean)
], AccountTxDao.prototype, "migrated", void 0);
tslib_1.__decorate([
    typeorm_1.Column(),
    tslib_1.__metadata("design:type", Date)
], AccountTxDao.prototype, "created", void 0);
tslib_1.__decorate([
    typeorm_1.Column({ nullable: true }),
    tslib_1.__metadata("design:type", Date)
], AccountTxDao.prototype, "settled", void 0);
tslib_1.__decorate([
    typeorm_1.AfterLoad(),
    typeorm_1.AfterInsert(),
    typeorm_1.AfterUpdate(),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", []),
    tslib_1.__metadata("design:returntype", void 0)
], AccountTxDao.prototype, "afterLoad", null);
AccountTxDao = tslib_1.__decorate([
    typeorm_1.Entity({ name: 'accountTx' })
], AccountTxDao);
exports.AccountTxDao = AccountTxDao;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudF90eF9kYW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZGF0YWJhc2Uvc3FsX2RhdGFiYXNlL2FjY291bnRfdHhfZGFvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSx5REFBcUQ7QUFDckQscUNBQW9HO0FBQ3BHLHFDQUFrRDtBQUNsRCwrQ0FBOEY7QUFHOUYsSUFBYSxZQUFZLEdBQXpCLE1BQWEsWUFBWTtJQTZCdkIsU0FBUztRQUNQLElBQUksSUFBSSxDQUFDLE9BQU8sS0FBSyxJQUFJLEVBQUU7WUFDekIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1NBQ3JCO0lBQ0gsQ0FBQztDQUNGLENBQUE7QUFoQ0M7SUFEQyx1QkFBYSxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLCtCQUFpQixDQUFDLEVBQUUsQ0FBQztzQ0FDNUMsZ0JBQU07NENBQUM7QUFJdkI7SUFGQyxlQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUM7SUFDeEIsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQyxrQ0FBb0IsQ0FBQyxFQUFFLENBQUM7c0NBQ3hDLGdCQUFTOzRDQUFDO0FBRzFCO0lBREMsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLGtDQUFvQixDQUFDLEVBQUUsQ0FBQztzQ0FDckQsZ0JBQVM7K0NBQUM7QUFHN0I7SUFEQyxnQkFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO3NDQUNBLE1BQU07dURBQUM7QUFHbEM7SUFEQyxnQkFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO3NDQUNBLE1BQU07dURBQUM7QUFHbEM7SUFEQyxnQkFBTSxFQUFFOzs4Q0FDaUI7QUFHMUI7SUFEQyxnQkFBTSxFQUFFO3NDQUNRLElBQUk7NkNBQUM7QUFHdEI7SUFEQyxnQkFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO3NDQUNWLElBQUk7NkNBQUM7QUFLdEI7SUFIQyxtQkFBUyxFQUFFO0lBQ1gscUJBQVcsRUFBRTtJQUNiLHFCQUFXLEVBQUU7Ozs7NkNBS2I7QUFqQ1UsWUFBWTtJQUR4QixnQkFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDO0dBQ2pCLFlBQVksQ0FrQ3hCO0FBbENZLG9DQUFZIn0=