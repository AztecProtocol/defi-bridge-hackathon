"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CoreSdk = exports.CoreSdkEvent = void 0;
const tslib_1 = require("tslib");
const account_id_1 = require("@aztec/barretenberg/account_id");
const address_1 = require("@aztec/barretenberg/address");
const client_proofs_1 = require("@aztec/barretenberg/client_proofs");
const crs_1 = require("@aztec/barretenberg/crs");
const crypto_1 = require("@aztec/barretenberg/crypto");
const ecc_1 = require("@aztec/barretenberg/ecc");
const fifo_1 = require("@aztec/barretenberg/fifo");
const note_algorithms_1 = require("@aztec/barretenberg/note_algorithms");
const rollup_proof_1 = require("@aztec/barretenberg/rollup_proof");
const tx_hash_1 = require("@aztec/barretenberg/tx_hash");
const wasm_1 = require("@aztec/barretenberg/wasm");
const world_state_1 = require("@aztec/barretenberg/world_state");
const debug_1 = tslib_1.__importDefault(require("debug"));
const detect_node_1 = tslib_1.__importDefault(require("detect-node"));
const events_1 = require("events");
const idb_mutex_1 = tslib_1.__importDefault(require("idb-mutex"));
const os_1 = tslib_1.__importDefault(require("os"));
const account_proof_creator_1 = require("../proofs/account_proof_creator");
const join_split_proof_creator_1 = require("../proofs/join_split_proof_creator");
const proof_output_1 = require("../proofs/proof_output");
const sdk_1 = require("../sdk");
const signer_1 = require("../signer");
const user_1 = require("../user");
const user_state_1 = require("../user_state");
const user_tx_1 = require("../user_tx");
const debug = debug_1.default('bb:core_sdk');
/**
 * These are events that are only emitted due to changes triggered within the current execution context.
 * Primarily, these are hooked into a broadcast channel to notify other instances of state changes.
 * Treat CoreSdkEvents as events for synchronising state between SDK instances, and SdkEvents for notifying UI changes.
 */
var CoreSdkEvent;
(function (CoreSdkEvent) {
    // The world state db has been updated.
    CoreSdkEvent["UPDATED_WORLD_STATE"] = "CORESDKEVENT_UPDATED_WORLD_STATE";
    // The set of users changed.
    CoreSdkEvent["UPDATED_USERS"] = "CORESDKEVENT_UPDATED_USERS";
    // The state of a user has changed.
    CoreSdkEvent["UPDATED_USER_STATE"] = "CORESDKEVENT_UPDATED_USER_STATE";
})(CoreSdkEvent = exports.CoreSdkEvent || (exports.CoreSdkEvent = {}));
class CoreSdk extends events_1.EventEmitter {
    constructor(leveldb, db, rollupProvider, options) {
        super();
        this.leveldb = leveldb;
        this.db = db;
        this.rollupProvider = rollupProvider;
        this.options = options;
        this.userStates = [];
        this.mutex = !detect_node_1.default ? new idb_mutex_1.default('world-state-mutex') : undefined;
        this.numCPU = !detect_node_1.default ? navigator.hardwareConcurrency || 2 : os_1.default.cpus().length;
        this.sdkStatus = {
            chainId: -1,
            rollupContractAddress: address_1.EthAddress.ZERO,
            syncedToRollup: -1,
            latestRollupId: -1,
            initState: sdk_1.SdkInitState.UNINITIALIZED,
            dataRoot: Buffer.alloc(0),
            dataSize: 0,
            assets: [],
        };
    }
    nextLowestPowerOf2(n) {
        return Math.pow(2, Math.floor(Math.log(n) / Math.log(2)));
    }
    async init() {
        if (this.sdkStatus.initState !== sdk_1.SdkInitState.UNINITIALIZED) {
            throw new Error('Sdk is not UNINITIALIZED.');
        }
        this.updateInitState(sdk_1.SdkInitState.INITIALIZING);
        const barretenberg = await wasm_1.BarretenbergWasm.new();
        const numWorkers = this.nextLowestPowerOf2(Math.min(this.numCPU, 8));
        this.workerPool = await wasm_1.WorkerPool.new(barretenberg, numWorkers);
        const noteAlgos = new note_algorithms_1.NoteAlgorithms(barretenberg, this.workerPool.workers[0]);
        this.blake2s = new crypto_1.Blake2s(barretenberg);
        this.pedersen = new crypto_1.PooledPedersen(barretenberg, this.workerPool);
        this.grumpkin = new ecc_1.Grumpkin(barretenberg);
        this.schnorr = new crypto_1.Schnorr(barretenberg);
        this.userFactory = new user_1.UserDataFactory(this.grumpkin);
        this.userStateFactory = new user_state_1.UserStateFactory(this.grumpkin, this.pedersen, noteAlgos, this.db, this.rollupProvider);
        this.worldState = new world_state_1.WorldState(this.leveldb, this.pedersen);
        await this.initUserStates();
        await this.worldState.init();
        const { blockchainStatus: { chainId, rollupContractAddress, assets }, } = await this.getRemoteStatus();
        await this.leveldb.put('rollupContractAddress', rollupContractAddress.toBuffer());
        this.sdkStatus = {
            ...this.sdkStatus,
            chainId,
            rollupContractAddress: rollupContractAddress,
            dataSize: this.worldState.getSize(),
            dataRoot: this.worldState.getRoot(),
            syncedToRollup: +(await this.leveldb.get('syncedToRollup').catch(() => -1)),
            latestRollupId: +(await this.leveldb.get('latestRollupId').catch(() => -1)),
            assets,
        };
        // Create provers
        const crsData = await this.getCrsData(client_proofs_1.JoinSplitProver.circuitSize);
        const pooledProverFactory = new client_proofs_1.PooledProverFactory(this.workerPool, crsData);
        const joinSplitProver = new client_proofs_1.JoinSplitProver(await pooledProverFactory.createUnrolledProver(client_proofs_1.JoinSplitProver.circuitSize));
        this.joinSplitProofCreator = new join_split_proof_creator_1.JoinSplitProofCreator(joinSplitProver, this.worldState, this.grumpkin, this.pedersen, noteAlgos, this.db);
        const accountProver = new client_proofs_1.AccountProver(await pooledProverFactory.createUnrolledProver(client_proofs_1.AccountProver.circuitSize));
        this.accountProofCreator = new account_proof_creator_1.AccountProofCreator(accountProver, this.worldState, this.pedersen);
        await this.createJoinSplitProvingKey(joinSplitProver);
        await this.createAccountProvingKey(accountProver);
        this.updateInitState(sdk_1.SdkInitState.INITIALIZED);
    }
    async getRollupContractAddress() {
        const result = await this.leveldb.get('rollupContractAddress').catch(() => undefined);
        return result ? new address_1.EthAddress(result) : undefined;
    }
    async eraseDb() {
        await this.leveldb.clear();
        await this.db.clear();
    }
    async getCrsData(circuitSize) {
        let crsData = await this.db.getKey(`crs-${circuitSize}`);
        if (!crsData) {
            this.logInitMsgAndDebug('Downloading CRS data...');
            const crs = new crs_1.Crs(circuitSize);
            await crs.download();
            crsData = Buffer.from(crs.getData());
            await this.db.addKey(`crs-${circuitSize}`, crsData);
            debug('done.');
        }
        return crsData;
    }
    /**
     * Shutdown any existing `UserState` instances and wait for them to complete any processing.
     * Load the users from the database and create and initialize their new user states.
     * Emit SdkEvent.UPDATED_USERS to update the UI containing any user lists.
     * Emit SdkEvent.UPDATED_USER_STATE to update the UI for each user.
     * Register for changes to each user state and emit appropriate events.
     * If this SDK instance is handling blocks, start syncing the user states.
     *
     * Public, as it will be called in the event of another instance emitting CoreSdkEvent.UPDATED_USERS.
     */
    async initUserStates() {
        debug('initializing user states...');
        await this.stopSyncingUserStates();
        const users = await this.db.getUsers();
        this.userStates = users.map(u => this.userStateFactory.createUserState(u));
        await Promise.all(this.userStates.map(us => us.init()));
        this.emit(sdk_1.SdkEvent.UPDATED_USERS);
        this.userStates.forEach(us => this.startSyncingUserState(us));
    }
    startSyncingUserState(userState) {
        this.emit(sdk_1.SdkEvent.UPDATED_USER_STATE, userState.getUser().id);
        userState.on(user_state_1.UserStateEvent.UPDATED_USER_STATE, (id, balanceAfter, diff, assetId) => {
            this.emit(CoreSdkEvent.UPDATED_USER_STATE, id, balanceAfter, diff, assetId);
            this.emit(sdk_1.SdkEvent.UPDATED_USER_STATE, id, balanceAfter, diff, assetId);
        });
        if (this.processBlocksPromise) {
            userState.startSync();
        }
    }
    async stopSyncingUserStates() {
        for (const us of this.userStates) {
            us.removeAllListeners();
            await us.stopSync();
        }
    }
    async createJoinSplitProvingKey(joinSplitProver) {
        const start = new Date().getTime();
        const provingKey = await this.db.getKey('join-split-proving-key');
        if (provingKey) {
            this.logInitMsgAndDebug('Loading join-split proving key...');
            await joinSplitProver.loadKey(provingKey);
        }
        else {
            this.logInitMsgAndDebug('Computing join-split proving key...');
            await joinSplitProver.computeKey();
            if (this.options.saveProvingKey) {
                this.logInitMsgAndDebug('Saving join-split proving key...');
                const newProvingKey = await joinSplitProver.getKey();
                await this.db.addKey('join-split-proving-key', newProvingKey);
            }
            debug(`complete: ${new Date().getTime() - start}ms`);
        }
    }
    async createAccountProvingKey(accountProver) {
        const start = new Date().getTime();
        const provingKey = await this.db.getKey('account-proving-key');
        if (provingKey) {
            this.logInitMsgAndDebug('Loading account proving key...');
            await accountProver.loadKey(provingKey);
        }
        else {
            this.logInitMsgAndDebug('Computing account proving key...');
            await accountProver.computeKey();
            if (this.options.saveProvingKey) {
                this.logInitMsgAndDebug('Saving account proving key...');
                const newProvingKey = await accountProver.getKey();
                await this.db.addKey('account-proving-key', newProvingKey);
            }
            debug(`complete: ${new Date().getTime() - start}ms`);
        }
    }
    async destroy() {
        var _a;
        await this.stopSyncingUserStates();
        await this.stopReceivingBlocks();
        await ((_a = this.workerPool) === null || _a === void 0 ? void 0 : _a.destroy());
        await this.leveldb.close();
        await this.db.close();
        this.updateInitState(sdk_1.SdkInitState.DESTROYED);
        this.removeAllListeners();
    }
    updateInitState(initState) {
        this.sdkStatus.initState = initState;
        this.emit(sdk_1.SdkEvent.UPDATED_INIT_STATE, initState);
    }
    getLocalStatus() {
        return { ...this.sdkStatus };
    }
    logInitMsgAndDebug(msg) {
        this.emit(sdk_1.SdkEvent.LOG, msg);
        debug(msg.toLowerCase());
    }
    async getRemoteStatus() {
        return await this.rollupProvider.getStatus();
    }
    async getFee(assetId, transactionType, speed) {
        const { txFees } = await this.getRemoteStatus();
        return txFees[assetId].feeConstants[transactionType] + txFees[assetId].baseFeeQuotes[speed].fee;
    }
    async startReceivingBlocks() {
        if (this.processBlocksPromise) {
            return;
        }
        this.blockQueue = new fifo_1.MemoryFifo();
        this.rollupProvider.on('block', b => this.blockQueue.put(b));
        this.userStates.forEach(us => us.startSync());
        this.processBlocksPromise = this.processBlockQueue();
        await this.sync();
        const syncedToRollup = await this.leveldb.get('syncedToRollup').catch(() => -1);
        await this.rollupProvider.start(+syncedToRollup + 1);
        debug('started processing blocks.');
    }
    async sync() {
        const syncedToRollup = +(await this.leveldb.get('syncedToRollup').catch(() => -1));
        const blocks = await this.rollupProvider.getBlocks(syncedToRollup + 1);
        if (!blocks.length) {
            return;
        }
        const rollups = blocks.map(b => rollup_proof_1.RollupProofData.fromBuffer(b.rollupProofData));
        debug('synchronising data...');
        await this.worldState.processRollups(rollups);
        await this.processAliases(rollups);
        if (rollups.length) {
            await this.updateStatusRollupInfo(rollups[rollups.length - 1]);
        }
        debug('done.');
        // Forward the block on to each UserState for processing.
        for (const block of blocks) {
            this.userStates.forEach(us => us.processBlock(block));
        }
    }
    async updateStatusRollupInfo(rollup) {
        const rollupId = rollup.rollupId;
        const latestRollupId = this.rollupProvider.getLatestRollupId();
        await this.leveldb.put('syncedToRollup', rollupId.toString());
        await this.leveldb.put('latestRollupId', latestRollupId.toString());
        this.sdkStatus.syncedToRollup = rollupId;
        this.sdkStatus.latestRollupId = latestRollupId;
        this.sdkStatus.dataRoot = this.worldState.getRoot();
        this.sdkStatus.dataSize = this.worldState.getSize();
        this.emit(CoreSdkEvent.UPDATED_WORLD_STATE, rollupId, latestRollupId);
        this.emit(sdk_1.SdkEvent.UPDATED_WORLD_STATE, rollupId, latestRollupId);
    }
    async stopReceivingBlocks() {
        var _a;
        await this.rollupProvider.stop();
        this.rollupProvider.removeAllListeners();
        (_a = this.blockQueue) === null || _a === void 0 ? void 0 : _a.cancel();
        await this.processBlocksPromise;
        this.processBlocksPromise = undefined;
    }
    async processBlockQueue() {
        var _a, _b;
        while (true) {
            const block = await this.blockQueue.get();
            if (!block) {
                break;
            }
            // We use a mutex to ensure only one tab will process a block at a time (to prevent merkle tree corruption).
            // This is only a safety mechanism for if two tabs are processing blocks at once. Correct behaviour would
            // be for only one tab to process the block, and to alert the others to sync.
            await ((_a = this.mutex) === null || _a === void 0 ? void 0 : _a.lock());
            await this.worldState.syncFromDb().catch(() => { });
            const rollup = rollup_proof_1.RollupProofData.fromBuffer(block.rollupProofData);
            await this.worldState.processRollup(rollup);
            await this.processAliases([rollup]);
            await this.updateStatusRollupInfo(rollup);
            await ((_b = this.mutex) === null || _b === void 0 ? void 0 : _b.unlock());
            // Forward the block on to each UserState for processing.
            this.userStates.forEach(us => us.processBlock(block));
        }
    }
    async processAliases(rollups) {
        const aliases = rollups
            .map(r => r.innerProofData)
            .flat()
            .filter(ip => ip.proofId === 1)
            .map(ip => {
            const { publicInput, publicOutput, assetId } = ip;
            const { aliasHash, nonce } = user_1.AccountAliasId.fromBuffer(assetId);
            const address = new address_1.GrumpkinAddress(Buffer.concat([publicInput, publicOutput]));
            // debug(`setting alias: ${aliasHash} -> ${address} (${nonce}).`);
            return { aliasHash, address, latestNonce: nonce };
        });
        await this.db.setAliases(aliases);
    }
    /**
     * Called when another instance of the sdk has updated the world state db.
     */
    async notifyWorldStateUpdated() {
        await this.worldState.syncFromDb();
        this.sdkStatus.dataRoot = this.worldState.getRoot();
        this.sdkStatus.dataSize = this.worldState.getSize();
        this.sdkStatus.syncedToRollup = +(await this.leveldb.get('syncedToRollup').catch(() => -1));
        this.sdkStatus.latestRollupId = +(await this.leveldb.get('latestRollupId').catch(() => -1));
        this.emit(sdk_1.SdkEvent.UPDATED_WORLD_STATE, this.sdkStatus.syncedToRollup, this.sdkStatus.latestRollupId);
    }
    /**
     * Called when another instance of the sdk has updated a users state.
     * Call the user state init function to refresh users internal state.
     * Emit an SdkEvent to update the UI.
     */
    async notifyUserStateUpdated(userId, balanceAfter, diff, assetId) {
        var _a;
        await ((_a = this.getUserState(userId)) === null || _a === void 0 ? void 0 : _a.init());
        this.emit(sdk_1.SdkEvent.UPDATED_USER_STATE, userId, balanceAfter, diff, assetId);
    }
    /**
     * Return the latest nonce for a given public key, derived from chain data.
     */
    async getLatestUserNonce(publicKey) {
        return (await this.db.getLatestNonceByAddress(publicKey)) || 0;
    }
    async getAddressFromAlias(alias, nonce) {
        const aliasHash = this.computeAliasHash(alias);
        return this.db.getAddressByAliasHash(aliasHash, nonce);
    }
    async getAccountId(user, nonce) {
        if (typeof user === 'string') {
            const publicKey = address_1.GrumpkinAddress.isAddress(user)
                ? address_1.GrumpkinAddress.fromString(user)
                : await this.getAddressFromAlias(user);
            if (!publicKey) {
                throw new Error('Alias not registered.');
            }
            const accountNonce = nonce !== undefined ? nonce : await this.getLatestUserNonce(publicKey);
            return new user_1.AccountId(publicKey, accountNonce);
        }
        const accountNonce = nonce !== undefined ? nonce : await this.getLatestUserNonce(user);
        return new user_1.AccountId(user, accountNonce);
    }
    async isAliasAvailable(alias) {
        // TODO - request it from server so that we can also check those aliases in unsettled txs.
        const aliasHash = this.computeAliasHash(alias);
        const address = await this.db.getAddressByAliasHash(aliasHash);
        return !address;
    }
    computeAliasHash(alias) {
        return account_id_1.AliasHash.fromAlias(alias, this.blake2s);
    }
    createSchnorrSigner(privateKey) {
        const publicKey = this.derivePublicKey(privateKey);
        return new signer_1.SchnorrSigner(this.schnorr, publicKey, privateKey);
    }
    async createJoinSplitProof(assetId, userId, publicInput, publicOutput, privateInput, recipientPrivateOutput, senderPrivateOutput, signer, noteRecipient, inputOwner, outputOwner) {
        const userState = this.getUserState(userId);
        const { txId, proofData, viewingKeys, depositSigningData } = await this.joinSplitProofCreator.createProof(userState, publicInput, publicOutput, privateInput, recipientPrivateOutput, senderPrivateOutput, BigInt(0), assetId, signer, noteRecipient, inputOwner, outputOwner);
        const txHash = new tx_hash_1.TxHash(txId);
        const tx = new user_tx_1.UserJoinSplitTx(txHash, userId, assetId, publicInput, publicOutput, privateInput, recipientPrivateOutput, senderPrivateOutput, inputOwner, outputOwner, true, new Date());
        return new proof_output_1.JoinSplitProofOutput(tx, proofData, viewingKeys, publicInput ? depositSigningData : undefined);
    }
    async createAccountTx(signer, alias, nonce, migrate, accountPublicKey, newAccountPublicKey, newSigningPubKey1, newSigningPubKey2) {
        const aliasHash = this.computeAliasHash(alias);
        const accountId = nonce ? new user_1.AccountId(accountPublicKey, nonce) : undefined;
        const accountIndex = accountId ? await this.db.getUserSigningKeyIndex(accountId, signer.getPublicKey()) : undefined;
        return this.accountProofCreator.createAccountTx(signer, aliasHash, nonce, migrate, accountPublicKey, newAccountPublicKey, newSigningPubKey1, newSigningPubKey2, accountIndex);
    }
    async createAccountProof(userId, signer, aliasHash, nonce, migrate, newSigningPublicKey1, newSigningPublicKey2, newAccountPrivateKey) {
        const userState = this.getUserState(userId);
        const { publicKey } = userState.getUser();
        const signerPublicKey = signer.getPublicKey();
        const accountId = nonce ? new user_1.AccountId(publicKey, nonce) : undefined;
        const accountIndex = accountId ? await this.db.getUserSigningKeyIndex(accountId, signerPublicKey) : undefined;
        const newAccountPublicKey = newAccountPrivateKey ? this.derivePublicKey(newAccountPrivateKey) : publicKey;
        const newNonce = nonce + +migrate;
        this.emit(sdk_1.SdkEvent.LOG, 'Generating proof...');
        const rawProofData = await this.accountProofCreator.createProof(signer, aliasHash, nonce, migrate, publicKey, newAccountPublicKey, newSigningPublicKey1, newSigningPublicKey2, accountIndex);
        const { txId } = new client_proofs_1.ProofData(rawProofData);
        const txHash = new tx_hash_1.TxHash(txId);
        const tx = new user_tx_1.UserAccountTx(txHash, new user_1.AccountId(newAccountPublicKey, newNonce), aliasHash, newSigningPublicKey1 === null || newSigningPublicKey1 === void 0 ? void 0 : newSigningPublicKey1.x(), newSigningPublicKey2 === null || newSigningPublicKey2 === void 0 ? void 0 : newSigningPublicKey2.x(), migrate, new Date());
        return new proof_output_1.AccountProofOutput(tx, rawProofData);
    }
    async createDefiProof(bridgeId, userId, depositValue, txFee, signer) {
        const userState = this.getUserState(userId);
        const { txId, proofData, viewingKeys } = await this.joinSplitProofCreator.createProof(userState, BigInt(0), BigInt(0), depositValue + txFee, BigInt(0), BigInt(0), depositValue, bridgeId.inputAssetId, signer, undefined, undefined, undefined, bridgeId);
        const txHash = new tx_hash_1.TxHash(txId);
        const tx = new user_tx_1.UserDefiTx(txHash, userId, bridgeId, depositValue, txFee, new Date());
        return new proof_output_1.DefiProofOutput(tx, proofData, viewingKeys);
    }
    async sendProof(proofOutput, depositSignature) {
        const { tx } = proofOutput;
        const { userId } = tx;
        const userState = this.getUserState(userId);
        const { proofData, viewingKeys } = proofOutput;
        await this.rollupProvider.sendProof({ proofData, viewingKeys, depositSignature });
        await userState.addTx(tx);
        return tx.txHash;
    }
    async isSynchronised() {
        const providerStatus = await this.rollupProvider.getStatus();
        const localDataRoot = this.worldState.getRoot();
        return localDataRoot.equals(providerStatus.blockchainStatus.dataRoot);
    }
    async awaitSynchronised() {
        while (true) {
            try {
                if (await this.isSynchronised()) {
                    return;
                }
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            catch (err) {
                debug(err);
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
        }
    }
    isUserSynching(userId) {
        return this.getUserState(userId).isSyncing();
    }
    async awaitUserSynchronised(userId) {
        await this.getUserState(userId).awaitSynchronised();
    }
    async awaitSettlement(txHash, timeout = 300) {
        const started = new Date().getTime();
        while (true) {
            if (timeout && new Date().getTime() - started > timeout * 1000) {
                throw new Error(`Timeout awaiting tx settlement: ${txHash}`);
            }
            if (await this.db.isUserTxSettled(txHash)) {
                break;
            }
            await new Promise(resolve => setTimeout(resolve, 1000));
        }
    }
    getUserState(userId) {
        const userState = this.userStates.find(us => us.getUser().id.equals(userId));
        if (!userState) {
            throw new Error(`User not found: ${userId}`);
        }
        return userState;
    }
    async userExists(userId) {
        return !!(await this.db.getUser(userId));
    }
    getUserData(userId) {
        return this.getUserState(userId).getUser();
    }
    getUsersData() {
        return this.userStates.map(us => us.getUser());
    }
    derivePublicKey(privateKey) {
        return this.userFactory.derivePublicKey(privateKey);
    }
    async addUser(privateKey, nonce, noSync = false) {
        const publicKey = this.derivePublicKey(privateKey);
        const accountNonce = nonce !== undefined ? nonce : await this.getLatestUserNonce(publicKey);
        let syncedToRollup = -1;
        if (noSync) {
            const { blockchainStatus: { nextRollupId }, } = await this.getRemoteStatus();
            syncedToRollup = nextRollupId - 1;
        }
        const aliasHash = accountNonce > 0 ? await this.db.getAliasHashByAddress(publicKey) : undefined;
        const user = await this.userFactory.createUser(privateKey, accountNonce, aliasHash, syncedToRollup);
        if (await this.db.getUser(user.id)) {
            throw new Error(`User already exists: ${user.id}`);
        }
        return await this.addUserFromUserData(user);
    }
    async addUserFromUserData(user) {
        await this.db.addUser(user);
        const userState = this.userStateFactory.createUserState(user);
        await userState.init();
        this.userStates.push(userState);
        this.emit(CoreSdkEvent.UPDATED_USERS);
        this.emit(sdk_1.SdkEvent.UPDATED_USERS);
        this.startSyncingUserState(userState);
        return user;
    }
    async removeUser(userId) {
        const userState = this.getUserState(userId);
        this.userStates = this.userStates.filter(us => us !== userState);
        userState.stopSync();
        await this.db.removeUser(userId);
        this.emit(CoreSdkEvent.UPDATED_USERS);
        this.emit(sdk_1.SdkEvent.UPDATED_USERS);
    }
    async getSigningKeys(accountId) {
        // TODO - fetch the keys from server so that the account doesn't have to be added locally.
        const keys = await this.db.getUserSigningKeys(accountId);
        return keys.map(k => k.key);
    }
    getBalance(assetId, userId) {
        const userState = this.getUserState(userId);
        return userState.getBalance(assetId);
    }
    getMaxSpendableValue(assetId, userId) {
        const userState = this.getUserState(userId);
        return userState.getMaxSpendableValue(assetId);
    }
    async getSpendableNotes(assetId, userId) {
        const userState = this.getUserState(userId);
        return userState.getSpendableNotes(assetId);
    }
    async getSpendableSum(assetId, userId) {
        const userState = this.getUserState(userId);
        return userState.getSpendableSum(assetId);
    }
    async getJoinSplitTxs(userId) {
        return this.db.getJoinSplitTxs(userId);
    }
    async getAccountTxs(userId) {
        return this.db.getAccountTxs(userId);
    }
    async getDefiTxs(userId) {
        return this.db.getDefiTxs(userId);
    }
    async getNotes(userId) {
        return this.db.getUserNotes(userId);
    }
}
exports.CoreSdk = CoreSdk;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29yZV9zZGsuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY29yZV9zZGsvY29yZV9zZGsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLCtEQUEyRDtBQUMzRCx5REFBMEU7QUFLMUUscUVBQW1IO0FBQ25ILGlEQUE4QztBQUM5Qyx1REFBd0Y7QUFDeEYsaURBQW1EO0FBQ25ELG1EQUFzRDtBQUN0RCx5RUFBcUU7QUFDckUsbUVBQW1FO0FBRW5FLHlEQUFxRDtBQUNyRCxtREFBd0U7QUFDeEUsaUVBQTZEO0FBQzdELDBEQUFnQztBQUNoQyxzRUFBaUM7QUFDakMsbUNBQXNDO0FBQ3RDLGtFQUE4QjtBQUU5QixvREFBb0I7QUFFcEIsMkVBQXNFO0FBQ3RFLGlGQUEyRTtBQUMzRSx5REFBZ0g7QUFDaEgsZ0NBQTJEO0FBQzNELHNDQUFrRDtBQUNsRCxrQ0FBK0U7QUFDL0UsOENBQTRFO0FBQzVFLHdDQUF3RTtBQUV4RSxNQUFNLEtBQUssR0FBRyxlQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7QUFFekM7Ozs7R0FJRztBQUNILElBQVksWUFPWDtBQVBELFdBQVksWUFBWTtJQUN0Qix1Q0FBdUM7SUFDdkMsd0VBQXdELENBQUE7SUFDeEQsNEJBQTRCO0lBQzVCLDREQUE0QyxDQUFBO0lBQzVDLG1DQUFtQztJQUNuQyxzRUFBc0QsQ0FBQTtBQUN4RCxDQUFDLEVBUFcsWUFBWSxHQUFaLG9CQUFZLEtBQVosb0JBQVksUUFPdkI7QUFNRCxNQUFhLE9BQVEsU0FBUSxxQkFBWTtJQTJCdkMsWUFDVSxPQUFnQixFQUNoQixFQUFZLEVBQ1osY0FBOEIsRUFDOUIsT0FBdUI7UUFFL0IsS0FBSyxFQUFFLENBQUM7UUFMQSxZQUFPLEdBQVAsT0FBTyxDQUFTO1FBQ2hCLE9BQUUsR0FBRixFQUFFLENBQVU7UUFDWixtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFDOUIsWUFBTyxHQUFQLE9BQU8sQ0FBZ0I7UUE3QnpCLGVBQVUsR0FBZ0Is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