"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UserDataFactory = void 0;
const tslib_1 = require("tslib");
const address_1 = require("@aztec/barretenberg/address");
const account_id_1 = require("@aztec/barretenberg/account_id");
const ecc_1 = require("@aztec/barretenberg/ecc");
tslib_1.__exportStar(require("@aztec/barretenberg/account_id"), exports);
tslib_1.__exportStar(require("./recovery_payload"), exports);
class UserDataFactory {
    constructor(grumpkin) {
        this.grumpkin = grumpkin;
    }
    derivePublicKey(privateKey) {
        return new address_1.GrumpkinAddress(this.grumpkin.mul(ecc_1.Grumpkin.one, privateKey));
    }
    async createUser(privateKey, nonce, aliasHash, syncedToRollup = -1) {
        const publicKey = this.derivePublicKey(privateKey);
        const id = new account_id_1.AccountId(publicKey, nonce);
        return { id, privateKey, publicKey, nonce, aliasHash, syncedToRollup };
    }
}
exports.UserDataFactory = UserDataFactory;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXNlci9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEseURBQThEO0FBQzlELCtEQUFzRTtBQUN0RSxpREFBbUQ7QUFFbkQseUVBQStDO0FBQy9DLDZEQUFtQztBQVduQyxNQUFhLGVBQWU7SUFDMUIsWUFBb0IsUUFBa0I7UUFBbEIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtJQUFHLENBQUM7SUFFMUMsZUFBZSxDQUFDLFVBQWtCO1FBQ2hDLE9BQU8sSUFBSSx5QkFBZSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGNBQVEsQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBRUQsS0FBSyxDQUFDLFVBQVUsQ0FBQyxVQUFrQixFQUFFLEtBQWEsRUFBRSxTQUFxQixFQUFFLGNBQWMsR0FBRyxDQUFDLENBQUM7UUFDNUYsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNuRCxNQUFNLEVBQUUsR0FBRyxJQUFJLHNCQUFTLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzNDLE9BQU8sRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3pFLENBQUM7Q0FDRjtBQVpELDBDQVlDIn0=