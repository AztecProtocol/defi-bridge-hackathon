"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.JoinSplitProofData = void 0;
const address_1 = require("../../address");
const bigint_buffer_1 = require("../../bigint_buffer");
const create_tx_id_1 = require("./create_tx_id");
class JoinSplitProofData {
    constructor(proofData) {
        this.proofData = proofData;
        this.assetId = this.proofData.assetId.readUInt32BE(28);
        this.publicInput = bigint_buffer_1.toBigIntBE(this.proofData.publicInput);
        this.publicOutput = bigint_buffer_1.toBigIntBE(this.proofData.publicOutput);
        this.inputOwner = new address_1.EthAddress(this.proofData.inputOwner.slice(12));
        this.outputOwner = new address_1.EthAddress(this.proofData.outputOwner.slice(12));
        /**
         * TODO: Get rid of this in favor of just signing tx id.
         * The data we sign over for authorizing deposits, consists of the data that is published on chain.
         * This excludes the last two fields, the noteTreeRoot and the txFee.
         */
        this.depositSigningData = this.proofData.rawProofData.slice(0, create_tx_id_1.LENGTH_PROOF_HEADER_INPUTS);
    }
}
exports.JoinSplitProofData = JoinSplitProofData;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam9pbl9zcGxpdF9wcm9vZl9kYXRhLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NsaWVudF9wcm9vZnMvcHJvb2ZfZGF0YS9qb2luX3NwbGl0X3Byb29mX2RhdGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkNBQTJDO0FBRTNDLHVEQUFpRDtBQUNqRCxpREFBNEQ7QUFHNUQsTUFBYSxrQkFBa0I7SUFRN0IsWUFBbUIsU0FBb0I7UUFBcEIsY0FBUyxHQUFULFNBQVMsQ0FBVztRQUNyQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN2RCxJQUFJLENBQUMsV0FBVyxHQUFHLDBCQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsWUFBWSxHQUFHLDBCQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUU1RCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksb0JBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0RSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksb0JBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUV4RTs7OztXQUlHO1FBQ0gsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUseUNBQTBCLENBQUMsQ0FBQztJQUM3RixDQUFDO0NBQ0Y7QUF2QkQsZ0RBdUJDIn0=