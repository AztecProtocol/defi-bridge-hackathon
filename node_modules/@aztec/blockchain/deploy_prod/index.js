#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ethers_1 = require("ethers");
const experimental_1 = require("@ethersproject/experimental");
const deploy_1 = require("./deploy");
const { ETHEREUM_HOST = 'http://localhost:8545', PRIVATE_KEY, ESCAPE_BLOCK_LOWER = '4560', // window of 1hr every 20hrs (escape in last 240 blocks of every 4800)
ESCAPE_BLOCK_UPPER = '4800', } = process.env;
const MULTI_SIG_ADDRESS = '0xE298a76986336686CC3566469e3520d23D1a8aaD';
// https://uniswap.org/docs/v2/smart-contracts/router02/#address
const UNISWAP_ROUTER_ADDRESS = '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D';
const WETH_ADDRESS = '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2';
function getSigner() {
    if (!PRIVATE_KEY) {
        throw new Error('Specify PRIVATE_KEY.');
    }
    console.error(`Json rpc provider: ${ETHEREUM_HOST}`);
    const provider = new ethers_1.ethers.providers.JsonRpcProvider(ETHEREUM_HOST);
    return new experimental_1.NonceManager(new ethers_1.ethers.Wallet(PRIVATE_KEY, provider));
}
async function main() {
    const { rollup, feeDistributor } = await deploy_1.deploy(+ESCAPE_BLOCK_LOWER, +ESCAPE_BLOCK_UPPER, UNISWAP_ROUTER_ADDRESS, WETH_ADDRESS, MULTI_SIG_ADDRESS, getSigner());
    console.log(`ROLLUP_CONTRACT_ADDRESS: ${rollup.address}`);
    console.log(`FEE_DISTRIBUTOR_ADDRESS: ${feeDistributor.address}`);
}
main().catch(error => {
    console.error(error);
    process.exit(1);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGVwbG95X3Byb2QvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsbUNBQXdDO0FBQ3hDLDhEQUEyRDtBQUMzRCxxQ0FBa0M7QUFFbEMsTUFBTSxFQUNKLGFBQWEsR0FBRyx1QkFBdUIsRUFDdkMsV0FBVyxFQUNYLGtCQUFrQixHQUFHLE1BQU0sRUFBRSxzRUFBc0U7QUFDbkcsa0JBQWtCLEdBQUcsTUFBTSxHQUM1QixHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFFaEIsTUFBTSxpQkFBaUIsR0FBRyw0Q0FBNEMsQ0FBQztBQUV2RSxnRUFBZ0U7QUFDaEUsTUFBTSxzQkFBc0IsR0FBRyw0Q0FBNEMsQ0FBQztBQUM1RSxNQUFNLFlBQVksR0FBRyw0Q0FBNEMsQ0FBQztBQUVsRSxTQUFTLFNBQVM7SUFDaEIsSUFBSSxDQUFDLFdBQVcsRUFBRTtRQUNoQixNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7S0FDekM7SUFDRCxPQUFPLENBQUMsS0FBSyxDQUFDLHNCQUFzQixhQUFhLEVBQUUsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sUUFBUSxHQUFHLElBQUksZUFBTSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDckUsT0FBTyxJQUFJLDJCQUFZLENBQUMsSUFBSSxlQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQVcsQ0FBQyxDQUFDO0FBQzlFLENBQUM7QUFFRCxLQUFLLFVBQVUsSUFBSTtJQUNqQixNQUFNLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxHQUFHLE1BQU0sZUFBTSxDQUM3QyxDQUFDLGtCQUFrQixFQUNuQixDQUFDLGtCQUFrQixFQUNuQixzQkFBc0IsRUFDdEIsWUFBWSxFQUNaLGlCQUFpQixFQUNqQixTQUFTLEVBQUUsQ0FDWixDQUFDO0lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDMUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsY0FBYyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDcEUsQ0FBQztBQUVELElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRTtJQUNuQixPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3JCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEIsQ0FBQyxDQUFDLENBQUMifQ==